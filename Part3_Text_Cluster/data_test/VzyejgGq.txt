航空工艺技术
AERONAUTICAL MANUFACTURING TECHNOLOGY
1999年　第3期　No.3 1999



空间自由曲面五坐标数控加工
无干涉刀位轨迹生成算法
Interference_Free Tool Path Generation Algorithm for 5_Axis 
NC Machining Spatial Free_Formed Surface
李立杰　王　珉
　　［摘要］　提出了一种空间自由曲面五坐标数控加工无干涉刀位轨迹生成算法，有效地解决了多坐标数控加工中存在的干涉问题。
　　关键词： 数控加工　刀位轨迹　干涉

　　［ABSTRACT］　This paper presents an interference_free tool path generation algorithm for 5_axis free_formed surface machining, this algorithm resolves the problems of interference during the NC machining effectively.
　　Keywords: NC machining　Tool path　Interference

　　随着航空航天、船舶和汽车工业的发展，越来越多的复杂曲面零件需用多坐标数控机床进行加工。特别是采用平头端铣刀进行五坐标数控加工时，由于平头端铣刀在刀头各处的切削速度相等，其切削效率要比球头刀高。另外，平头端铣刀磨损修复后尺寸不变，而球头刀磨损后很难修复成与原来相同的尺寸，因此，平头端铣刀在加工质量上较球头刀有很大改善，并且由于增加了两个旋转自由度，其加工柔性更好，在工业中的应用也日益广泛。但是，五坐标数控加工也存在着严重的缺陷，即加工过程中极易产生干涉，而如何解决五坐标数控加工中的干涉已成为生产中亟待解决的问题。刀具与被加工表面间的干涉分为曲率干涉和瓶颈干涉两种。当被加工表面的曲率半径小于刀具半径时，刀具和被加工表面间就会发生曲率干涉。有时尽管被加工表面的曲率半径大于刀具半径，但仍有可能发生刀具过切被加工表面的现象，此时的干涉称为瓶颈干涉，如图1所示。在空间自由曲面五坐标数控加工中，如何确定各类刀具的无干涉刀位轨迹，至今仍是一个难题。特别是非球头刀，由于形状各异，且不具备球头刀的法矢自适应性，因而与球头刀相比，其在生成数控加工刀轨及进行干涉检查时更困难。


图1　刀具与被加工表面间的干涉
Fig.1　Interference of tool with 
surface to be machined
　　本文针对空间自由曲面五坐标数控加工中存在的干涉问题，提出了一种平头端铣刀无干涉刀位轨迹的生成算法。

1　刀具坐标系和局部坐标系及刀具有效半径的定义
　　(1)刀具坐标系(Xt-Yt-Zt)：刀具坐标系定义在刀具上，以刀具底面中心点为原点Ot，原点与CC点(刀具与被加工表面的切触点)的连线为Xt方向，Yt为刀具轴线方向，Zt与Xt,Yt成右手系，如图2所示。


图2　刀具坐标系和局部坐标系
Fig.2　Tool coordinate system and 
local coordinate system 
　　(2)局部坐标系(XL-YL-ZL):局部坐标系以CC点为原点OL，以瞬时切削方向为XL方向，YL为被加工表面在CC点的法向，ZL与XL，YL成右手系，如图2所示。
　　(3)刀具有效半径：平头端铣刀底部轮廓在YL-ZL平面上的投影为一椭圆，它随着走刀方向的变化而变化，如图3所示。在此平面内，可以用半径为Re的圆弧来近似代替CC点附近的刀具轮廓，称此圆弧半径Re为平头端铣刀的有效半径，经推导得
　　　　　　
…………(1)
式中，r为刀具半径，α为刀具倾角，k=(1+sin2α)/2sinα。当α<15°时，k对α的变化非常敏感，α的微小改变可引起k的急剧变化。


图3　平头端铣刀的有效半径
Fig.3　Effective radius of butt end milling tool
2　CC轨迹的确定
　　所有CC点的集合构成了CC轨迹。文献［3］中提出了3种CC轨迹产生方法，分别为利用u参数线、v参数线和u=v线作为CC轨迹。尽管这些方法比较简单且在某种情况下能满足加工要求，但是对于一些空间自由曲面，由于其参数空间中的直线在实际的笛卡儿空间中并不是直线，即在参数空间中的等行距，在笛卡儿空间中并不一定是等行距的，因此采用这些方法产生的CC轨迹的行距必须仔细设定，才能保证被加工表面的残留高度符合要求。
　　为消除以上缺陷，采用一组垂直于某一轴线的平行平面去截被加工表面，其交线即为CC轨迹，各平行平面间的距离为行距。这样就使得CC轨迹在笛卡儿空间中为等行距，且为平面曲线。如前所述，平头端铣刀在切削被加工表面时，在CC点相当于以半径为有效半径的球头刀进行切削，当刀具沿CC轨迹移动时，相邻两CC轨迹间会产生残留高度，如图4所示。残留高度与行距间的关系如下：

式中，ρ为CC点在主法矢方向的曲率半径；c为残留高度；d为刀轨间的行距。


图4　残留高度与行距间的关系
Fig.4　Relationship between scallop 
and cut to cut distance
3　刀位轨迹的确定
　　在五轴数控加工中，通常以平头端铣刀底部中心点为刀位点(CL点)，同时，在切削过程中平头端铣刀向切削方向倾斜一定角度α，则初始刀位点数据相对于局部坐标系为
　　　　　
式中，r为平头端铣刀半径；α0为刀具初始倾角。
　　在切削加工中，为了避免干涉，刀具倾角α又时常需要变更Δα角度(增加为+，减少为-)，同时偏转β角度，各角度的旋转轴线和方向如图2所示，则调整后的刀位在局部坐标系中为
　　　

4　干涉的消除
4.1　曲率干涉的消除
　　在五坐标数控加工中，刀具的实际切削形态随着刀位的改变而改变。为了避免干涉，刀具有效切削形状应与被加工表面在CC点附近的局部形状相适应，因此，当选择决定刀位的α和β角度时，应使Re<ρc(ρc为被加工表面CC点在YL-ZL平面的曲率半径)。由式(1)可知，Re与α的选择有关，已知ρc与r，即可求出无干涉时的α。
　　由Re<ρc得

解此不等式，α取其中一合适值。
4.2　瓶颈干涉的消除
　　在五坐标数控加工中，当Re<ρc时，尽管无曲率干涉，但是刀具的侧缘和后缘仍有可能过切被加工表面，发生瓶颈干涉。在图5中，以CC点为圆心，在平行于Zt-Xt的平面内以2r+ε(ε>0)为半径作圆，把位于此圆内且与刀具底部在此平面内的投影重合点从局部坐标转换成刀具坐标，其转换公式为
　　　　　


图5　刀具角度调整
Fig.5　Tool angle adjustment
　　为了简化计算，我们只需对可能干涉点进行转化，对干涉点进行刀位修正。干涉点的确定方法如下：
　　(1)当XL<0,且≤2r时，此点为可能干涉点，需进行转化计算；
　　(2)当≤r，且Yt>0时，此点为干涉点。
　　当Yt>0时，刀具与被加工表面发生干涉，为了消除干涉，必须改变α或β角度(一般只需变更α即可)，最后使Yt≤0，即
　　　XLcosβsinα+YLcosα+ZLsinβsinα≤0
…(2)
　　一般预先设定β＝β0，则(2)式可整理为
　　　XLcosβ0sinα+YLcosα+ZLsinβ0sinα≤0
…(3)
解(3)式可得

其中，0≤α0≤π/2。
　　为了避免干涉，刀具所选α角度必须大于α0min，并且定义PK是干涉点Pi中比值｜YT，Pi｜／｜PCC，Pi｜达到最大值的点，则

αK＝α0+Δα
　　为了在所有干涉点都消除瓶颈干涉，刀具需倾斜的角度α规定如下：
αmin＝Max［α0，αK］
　　平头端铣刀五坐标数控加工无干涉刀轨生成过程如图6所示。


图6　无干涉刀位轨迹生成过程
Fig.6　Generation of interference_free tool path
　　本算法较好地解决了空间自由曲面平头端铣刀五坐标数控加工中的曲率干涉和瓶颈干涉问题，能够较方便地产生无干涉刀位轨迹，可用于航空行业用高速铣床、片铣刀加工曲面蜂窝零件的刀位计算。该算法已在工作站上开发的CNC系统中实现。
作者单位:南京航空航天大学
参考文献
　　1　Lee Y S, Chang T C. Two_phase approach to global tool interference avoidance in 5_axis machining. Comput._Aided Des., 1995,27(10):715～729
　　2　Veeramani D. Selection of an optimal set of cutting_tool sizes for 2.5D pocket machining. Comput._Aided Des., 1997,29(12):869～876
　　3　Li S, Jerard R B. 5_axis machining of sculptured surfaces with a flat_end cutter. Comput._Aided Des., 1994,26(3):165～178
(责编　宇　迪)　
