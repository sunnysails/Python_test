发信人: alexander (老鬼), 信区: Network 
标  题: 网络融合还看QoS 
发信站: 日月光华站 (Thu Dec  2 19:59:38 1999) , 转信 
  
　　 网络融合的生死存亡取决于能否顺利地通过基于策略的网络 
技术实现基于IP的QoS 。然而，基于策略的网络技术仍在开发之 
中。 
  
您相信网络融合吗？更确切地说，您相信语音、数据和视频能够 
和谐地在高速IP网络上传输这样一种世界新秩序吗？ 
  
如果您相信的话，您也会相信基于策略的网络技术。融合最终能 
否成功取决于IP社区以可管理、可伸缩的方式实现服务质量（QoS ） 
的能力：这正是基于策略的网络技术的意义。 
  
现实表明，基于策略的网络技术标准仍在制定之中，协议还没有 
经过测试，产品也不成熟。基于策略的网络技术在今后一两年还 
不能准备就绪。但是，开始学习基于策略网络技术的原理并不算 
早。 
  
策略的基本原理 
策略规定了如何在网络客户中提供网络资源。客户可以是用户、 
应用程序和主机，而资源可以根据时间、资源的使用以及客户的 
权限等情况通过静态提供，也可以通过动态提供。 
高级策略语句，如“向所有IP语音数据流提供加急转发”，被翻 
译为“if < 条件 > then < 行动 >”规则结构化集合，使策略 
可以被不同的网络部件保存、 检索和解释。 
  
可惜的是，第一代系统通常都不能解释高级策略语句。相反，这 
些系统要求网络管理人员来输入像“if Port=HTTP(80) then 
set IP Precedence=4”这样的策略。 
  
开发中的架构 
基于策略的网络最令人鼓舞的前景之一是Internet工程任务组 
（IETF）在制定标准策略架构以及相关协议与方案工作方面所取 
得的进展。 
至少在表面上看已经初见端倪的架构是一种简单、精致的架构。 
典型基于策略的网络将包括： 
  
策略输入控制台：网络管理人员通过它定义和编辑策略的一种管 
理工具； 
  
策略决策点（PDP）：从数据库中检索策略，并代表策略执行点 
（Policy Enforcement Point，PEP）做出决策的策略服务器； 
  
PEP：通过访问列表、队列管理算法和其它方式执行策略决策的 
网络设备， 如路由器、交换机和防火墙； 
  
策略数据库：保存策略的轻型目录访问协议（LDAP）兼容的目录 
服务器。 
PDP和PEP之间通过一种被称为通用开放策略服务（COPS）的简单 
询问／响应协议进行通信。由于COPS是面向连接的，并且十分可 
靠，因此它优于SNMP。COPS中包括防止多个PDP同时试图更新同 
一个PEP的机制。 
该架构没有规定实施的方法，多个部件既可以同时存在于一个物 
理服务器上，也可以存在于自己的服务器上。 
  
策略规则必须以数据结构的形式来表示，使之可以被保存和检索。 
为解决这一问题，IETF的策略架构工作组定义了策略架构核心信 
息模型。该模型规定了可以用于通用策略表示的面向对象类的高 
级集合。核心模块中的对象类可以利用子类进行扩展，以表示特 
定类型的策略，例如，QoS或网络安全策略。 
  
各厂商之间已就策略信息应当被保存在LDAP兼容的目录中取得了 
基本的一致，因此策略架构工作组定义了从核心信息模型到LDAP 
目录方案的映射。 
  
架构概念得到了厂商的广泛支持，并在IETF的Internet草案中做 
出了规定。尽管没有一项概念达到了“请求评论”（RFC）的阶段， 
但将这些想法集中在一起为未来如何建立策略网络系统指明了发 
展方向。 
  
QoS标准 
共有三种与企业网络相关的QoS 标准：差别服务（DiffServ）、 
资源保留协议（RSVP）以及802.1p。 
DiffServ对IPv4服务类型（ToS）字节或IPv6传输流级别如何用 
于规定QoS要求重新进行了定义。DiffServ与目前使用的ToS中 
的IP优先位是向后兼容的。 
DiffServ 的目的是为一般传输流类型或传输流集合（对应于单 
个传输流）提供QoS。 
  
RSVP是一种基于流的协议，它允许应用通过网络发送端到端控制 
信息来表明它所需要的QoS（时延、抖动、带宽）。传输路径上的 
路由器为应用流保存资源， 或者拒绝其进入网络。一年多以前， 
RSVP就已经在Cisco、Nortel的路由器，以及其它许多厂商的产品 
中得到了应用。 
  
802.1p是一种第二层机制，它允许在802.1Q虚拟LAN包头中使用三 
比特的信息来标记数据包的QoS。 
企业网络管理人员可能将在多数QoS应用中采用DiffServ，并在 
一些需要保留资源和许可控制（与其提供服务质量很差的语音， 
不如拒绝语音呼叫）的非常敏感的应用中（例如，IP语音）选择 
使用RSVP。 
在DiffServ模型中，在网络设备级实现QoS包括四个步骤。它们 
是： 
  
可以根据第二层到第四层（或更高）的包头信息对数据包进行分 
类； 
  
通过设置DiffServ位，标记数据包来指示类型； 
  
根据策略对数据包进行处理（在必要时有选择地丢弃包），以避 
免拥塞； 
  
成形（优先排队与转发）。 
随着专用集成电路技术的进步不断使第三层功能成本更加低廉， 
我们认为更高层（Layer）的分类与标记功能将由WAN边缘完全回 
到布线室中。而布线室正被多数厂商认为是这种功能最后的归宿。 
在实践中，分类与标记功能涉及到创建访问控制列表。策略是由随 
机早期检测或加权随机早期检测等算法实现的。成形（shaping） 
是利用加权轮询、 加权公平排队、基于类的排队、基于类的加权 
公平排队以及其它算法实现的。 
  
目前，配置策略和成形算法是由网络管理人员在接口到接口的基础 
上完成的。这也正是基于IP的QoS大规模应用少之又少的原因。 
  
各厂商的情况 
在过去一年到一年半的时间里，各大主要网络设备厂商都宣布了基 
于策略的网络计划，但只有很少几家厂商推出了产品。 
Cisco 
  
作为Cisco公司CiscoAssure基于策略的网络计划的一部分，该公司 
3月开始发送QoS Policy Manager 1.0（QPM）。CiscoAssure中还 
包括实现网络安全性的策略管理器Cisco Security Manager。QoS 
和安全管理器今后仍将作为独立的产品，但是共享一个通用的架构。 
  
QPM的图形用户界面简化了QoS配置的许多方面。在典型的会话中， 
用户可以添加新路由器，可以为每个接口选择排队算法，为类型过 
滤器和行为（设置IP优先级）接口创建策略，安排下载到路由器的 
策略。相同类型的接口可以按组分类，使策略既可以在单个接口级 
实施也可以在组级实施。 
  
QPM是第一代策略管理器产品：它提供了一些可以提高生产力的好 
处，但仍有许多细节需要用户完成，如队列机制和成形参数的选择。 
因此，网络管理人员仍需要了解Cisco的许多队列算法。 
  
QPM的首发版没有使用LDAP目录，也没有使用COPS。这两种技术有 
望在2000年上半年出现在产品中（COPS目前正运行在Cisco的试验 
室中）。下一版产品还将增加支持设备的数量，由大约200台设备 
增加为1000台以上。 
  
Nortel 
  
Nortel公司的Optivity Policy Services 1.0（OPS）于8月开始发 
货。OPS采用了IETF草案中描述的许多概念，包括策略服务器、 
COPS和存储策略信息的LDAP兼容目录。 
  
OPS目前在LDAP目录树中自己的分支存放策略信息，但是将在LDAP 
方案标准推出时迁移到IETF标准上。 
  
Nortel是第一批在网络设备（即运行BayRS 13.20路由软件的路由 
器）中采用COPS客户的公司之一。OPS利用COPS进行PDPPEP通信。 
它还支持包括Cisco 路由器在内的其它设备。 
  
在典型OPS会话中，用户可以添加路由器和单独的接口，可以使用 
过滤器创建传输流模式，创建像否定、标记或策略这类行为以及 
创建与传输流模式、行为和接口相关的策略。相同类型的接口可 
以按组分类。 
  
与Cisco公司的QPM类似，OPS提供了一些可以提高生产力的好处， 
但仍有许多细节需要用户完成。第一版产品中缺少的一个功能是 
规定和控制接口队列机制的能力。该功能必须在该策略系统之外， 
通过Nortel公司的标准路由器配置软件来实现。该公司预计在2000 
年第一季度将此功能添加到OPS中。 
  
Cabletron 
  
人们可能要说Cabletron在现有生产网络中开发基于策略的网络 
技术的历史比其它任何公司都长。四年前，Cabletron曾推出了 
一种早期PDP产品Virtual Network Server（VNS）。 
  
不过，VNS当时是基于Cabletron公司的专有SecureFast Switching 
技术的，该公司目前开始不再采用专有技术，而转向基于标准的 
技术。该公司的SmartSwitches 现在支持802.1p这类QoS标准， 
并支持使用ToS／DiffServ。SmartSwitches还在每个端口上支 
持四个队列，支持WFQ以及第二层到第四层分类和标记。这就意 
味着Cabletron目前就可以在布线室中提供高层的分类和标记技 
术，而其它多数厂商正试图通过升级来实现。 
  
Cabletron公司的QoS策略管理器（称为Spectrum Policy Aware） 
预定在2000 年第一季度发货。策略信息将保存在LDAP兼容的目录 
中，PDP 与PEP 之间的通信将支持COPS以及其它协议。PEP也可以 
使用LDAP与目录服务器进行通信。 
  
3Com 
  
3Com公司的策略服务器也要到2000年第一季度才能发货，该产品 
目前暂时叫Transcend Policy Service。该产品将符合IETF正在 
开发的标准，其中包括策略架构和采用COPS。策略将被保存在LDAP 
兼容的目录中，并且通过代理服务器来提供对传统产品的支持。 
  
3Com公司正通过向其第二层交换机中添加802.1p，向第三层路由 
器添加ToS ／DiffServ和RSVP来开发具有QoS功能的多种产品。 
3Com公司的动态访问产品也提供了在网络接口卡（只要是3Com网 
卡）上提交包分类和包标记的功能。 
  
多厂商管理 
  
在多厂商环境中，基于策略的管理的前景并不光明，至少在近期 
是这样。厂商与厂商之间实施策略与成形算法的做法差别很大， 
甚至在一家厂商的产品线中都是这样。要使策略管理真正独立于 
厂商，策略和成形的通用功能必须模型化，并且在QoS方案和策略 
信息库（PIB）中予以表示。网络设备必须支持PIB。 
  
多数厂商将支持自己的设备，并将尽力支持Cisco产品。然而， 
Cisco支持很多QoS机制，并且所支持的机制会越来越多。对于Cisco 
公司来说，支持所有的机制都很困难，更不要提其它厂商了。 
  
尽管近期互操作性前景十分暗淡，但仍有理由感到乐观。实现互 
操作性的长期前景相对清晰，厂商将投资实现互操作性。 
  
结论 
基于策略的网络技术无疑处于发展的早期阶段。IETF已经取得了 
巨大进步，但是仍有许多工作需要完成。可能还需要一年，多数 
有关标准才能达到RFC状态。 
可能更重要的是，IP社区离真正理解如何最佳地使用DiffServ 
和RSVP这样的技术来在生产网络中实现QoS仍需一到两年的时间。 
一旦在此领域取得一定的共识，厂商将需要使客户可以方便地在 
企业中实施这些技术。 
  

不过，不要害怕跳入基于策略的大海中，水是有一点冷，但正变 
得越来越暖和。现在涉足这一技术将有助确保您的网络在未来成 
为具备QoS的网络。 
  
-- 
  
        牡丹烟下死，做鬼也风流。 
  
