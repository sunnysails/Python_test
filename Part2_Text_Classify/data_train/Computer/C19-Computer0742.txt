自动化学报
AGTA AUTOMATICA SINICA
1999年 第25卷 第2期 Vol.25 No.2 1999



微进给装置的计算机数字控制系统的设计与实现1)
邓中亮　王先逵
摘　要　提出了微进给装置的数字PID控制及其参数的寻优控制方法，设计出了自寻优数字PID调节控制模型.分析了微进给装置数字控制系统的影响因素，并对微进给装置控制系统相移校正方法进行了探讨与实验分析，提出了超前输出控制相移校正方法，取得了较好的控制效果.
关键词　微进给装置，数字PID，自寻优，相移校正.
DESIGN AND REALIZATION OF COMPUTER NUMERICAL
CONTROL SYSTEM OF MICROFEED DEVICE
DENG Zhongliang
(Dept.of Electromechanical Engineering, Beijing Univ. of Posts & Telecommunications, Beijing　100088)
WANG Xiankui
(Dept. of Precision Instruments & Mechanics, Tsinghua University, Beijing　100084)
Abstract　A method of numerical PID control for microfeed device and an algorithm for accelerating optimization of its parameters are put forward in this paper. A model of numerical adjustment control optimized by itself is built, and the factors that affect the numerical control system are analyzed. Discussion and experiment on phase-shift correction of microfeed device show that a high correction accuracy can be obtained with the advanced output method.
Key words　Microfeed device, numerical PID, optimization, phase-shift correction.
1　微进给装置的特点
　　在非圆截面车削时，当主轴转速为3 000r/min时，加工四曲边形的进给轨迹频谱特性中的最高角频率为400Hz，而加工八曲边形时进给运行轨迹频谱特性中的最高角频率则达800Hz以上，因此相应的采样角频率应在1 600Hz以上，才能保证良好的进给运动轨迹控制效果.
　　微进给装置是精密加工、位移误差补偿所需重要环节.为了满足多种非圆截面零件加工需要，微进给装置数字控制系统的最低采样频率确定为40k～100kHz，这样才能保证在加工八曲边形等复杂零件时，进给运行轨迹信号变化一周内可采集到50～125个点的信息(工件转速为3 000r/min).用于数字控制的计算机应具有足够高的运算速度.
　　在精密加工中，微进给位移精度要求为0.1～1μm，所需刚度取决于驱动载荷(1～200N/μm).一般情况下，微进给装置包括驱动源与执行机构两部分，其结构尺寸与驱动负载有关.在轻负载情况下，执行机构与驱动源的尺寸较小(10mm以下)；而在大负载情况下(如直接驱动来刀运行)，则要求执行机构有足够的承载能力，尺寸也相应增大.要获取很高的位移精度，还必须通过合理的控制系统来实现.
2　微进给装置的数字PID控制
　　利用计算机实现数字PID控制具有以下优点：1)可以将PID算法修改得更为合理；2)对于参数的整定和修改更为方便；3)一台计算机可以同时控制多个参数、多个回路.
　　数字PID调节器的离散化形式为

(1)
其中kp为比例系数；Ti为积分时间常数；Td为微分时间常数；e(kT)为误差信号.对式(1)进行z变换得

(2)
令
(3)
　　要获得良好的控制特性，必须合理地确定PID调节器的各项系数kp,ki,kd.通常，数字PID调节器参数的整定，需要进行对象参数与过渡特性的测试与分析计算，或借助于调试经验来获得比较满意的结果.这种参数整定方法的工作十分繁琐，而且当对象参数改变时，必须重新调整PID的控制参数.为了提高数字PID参数整定速度，在微进给装置数字控制系统中，采用了自寻最优控制策略来实现数字PID参数的快速自动整定.
　　要完成数字PID参数自寻优整定，则事先必须确定寻优控制的性能指标J及寻优方法.其性能指标J可确定，当采样周期T为定值时，则可确定J为J=
　　在微进给装置的数字PID参数自寻优控制中采用了单纯形加速寻优法来整定各调节参数kp,ki,kd［6］.由于数字PID中需要整定的参数有三个，因此初始单纯形的顶点应取四点：(kp1,ki1,kd1),(kp2,ki2,kd2),(kp3,ki3,kd3),(kp4,ki4,kd4),令：xi=(kpi,kii,kdi).
3　自寻优数字PID调节控制系统的设计
　　为了便于控制系统具有较强的适应能力，针对微进给装置设计了数字PID参数自寻最优控制器，其控制结构模型如图1所示.

图1　自寻优数字PID调节控制结构模型
　　图1所示数字控制结构具有以下两大特点：
　　1)具有自学习功能
　　利用该控制系统可控制微进给装置实现多种形式的响应过程，如阶跃响应、频率响应等等.首先通过多次响应实验，自动采集输出信号，并辨识出传递函数K2G1(s)KD的参数［6］；然后根据这些参数，在数字计算机上用自寻优方法求出kp,ki,kd.当被控对象改变时，同样可通过多次瞬态响应过程获取最优控制参数.
　　2)具有最佳控制效果
　　系统PID参数是依据目标函数自动整定，整定后控制系统的动态特性将取决于系统的控制参数与所设定的目标函数，通过合理地选择目标函数，可获得所需要的动态特性.故利用图1所示数字控制结构可得到最佳控制状态.
　　微进给装置数字PID控制算法如下：

(4)
式中e(kT)=yr(kT)-y0(kT);yr(kT)为目标位置值；y0(kT)为实际位移值；T为采样周期.
　　在数字PID控制系统中，由于加入了积分校正，有时会产生较大的超调量，这对于精密切削加工十分不利，因此有必要对数字PID控制过程进行改进，可采用积分分离PID控制算法来降低超调量.积分分离PID控制算法可描述如下：

(5)
上式中E0为积分分离阈，当｜e(kT)｜≤｜E0｜，微进给数字控制系统为PID控制系统.
　　图2是TH-200型微进给装置数字PID控制系统在阶跃输入下的瞬态响应过程，实验在精密数控车床上进行，电源稳定精度为0.5%.从图2可知，利用数字PID控制也可以使微进给装置获得较好的控制效果，经PID校正后，微进给系统的固有频率可提高到250Hz以上，超调量可降低到5%以内.

图2　单位阶跃响应
4　采样周期对微进给装置数字控制系统的影响
　　在PID控制过程中，积分环节与微分环节都与采样时间T有关.在T为恒定值时，可利用查表方式来计算输出控制量，以提高实时运行速度.当T不为恒定值时，则不可避免地采用乘、除运算以确定输出控制量.
　　在非圆截面零件车削系统中，当径向进给插补过程为非定时过程时(如等误差插补等)，在单CPU控制系统中，微进给装置的采样及控制周期通常由插补过程来确定，采样周期不为恒定值，故数字PID调节过程的计算难度也因此而增加.所以，最好的解决方法为采用多CPU控制方案，用单独的CPU子系统来实现微进给装置的运行过程控制.
5　微进给装置控制系统相移校正控制
　　微进给装置的闭环控制系统随着频率ω的变化而存在着相位差，频率愈高，则其相位差愈大.在非圆截面零件加工过程中，这种滞后的相位差会导致工件表面形状在横截面上的分布产生偏移，严重影响加工质量，因此必须对微进给装置控制系统实行相移校正控制.可实现控制系统超前校正的途径有以下三类：一是模拟式超前校正；二是数字式超前校正；三是超前输出控制.
　　模拟式校正网络可用来校正某一选定频率处的相位φ，并使之为零［6，7］，倘若微进给系统工作在某一固定频率处时，用模拟式超前校正网络可获得很好的相移校正效果，但要在较宽的通频带内都达到零相位差的校正仍存在着较大的困难.
　　在数字式超前校正控制结构中，由于采用计算机来实现数字相移校正，因此可根据控制对象的相频特性确定通频带内各频率点的校正参数，对于不同频率的输入信号，可使用对应的校正参数来实现相移校正，从而达到全通频带内实现零相位跟踪的控制效果.数字式超前校正控制结构如图3所示.

图3　数字式超前校正控制结构框图
　　超前输出控制的原理是提前输出目标控制量，由此来减少控制系统的相位误差.这一控制策略是通过多次微进给控制实验总结出来的，并且在微进给装置控制过程中能取得良好的相位补偿效果(见图4).

图4　超前输出控制校正效果
　　设信号频率为ω，微进给系统输出相位滞后量为φ，T为采样周期，则超前输出控制过程为

(6)
上式中Xr为目标值；X0为超前校正的输出量.
　　图4所示是在频率为40Hz，幅值为0.4mm时，超前输出控制的校正结果，由图4可知利用该策略能达到较好的相位校正效果.
6　结论
　　微进给装置是实现精密切削与位移补偿的重要环节.本文提出了微进给装置的数字PID控制系统，在此基础上，介绍了自寻优PID参数整定算法，利用该算法，较方便地确定PID的最佳控制参数.本文还探讨了自寻优数PID调节控制模型及其影响因素，并分别介绍了三种相移校正控制方法：模拟式超前校控制、数字式超前校正控制与超前输出控制，利用超前输出控制在微进给装置的控制系统中，能获得良好的相移校正控制效果，并使微进给装置达到了预定的设计要求.
1) 国家自然科学基金资助项目.
作者简介：邓中亮　1965年出生.1994年于清华大学获工学博士学位，1996年从北京航空航天大学博士后流动站出站.现任北京邮电大学教授、系副主任.已发表论文五十余篇，出版专、译著2部.主要研究领域有：智能控制、CAD/CAM技术、邮政自动化、精密加工与微电子技术.
　　　　　王先逵　1932年出生.清华大学精密仪器与机械学系教授、博士生导师.主要研究领域有：机械工程及自动化、CAD/CAM技术、CAPP技术、精密加工与超精密加工技术等.主持并完成国家自然科学基金项目、863高技术课题多项，并多次获奖.
作者单位：邓中亮北京邮电大学机械电子工程系　北京　100088
　　　　　王先逵清华大学精仪系　北京　100084
参考文献
1　徐殿国，王宗培.伺服驱动系统发展概况.微电机，1990，20(3)：16―22
2　邓中亮.用微机实现步进电机的智能控制.微特电机，1992，(6)：27―29
3　邓中亮，王先逵.直线电机的智能化PID控制.电气传动，1993，23(2)：25―29
4　邓中亮，王先逵，冯之敬等.中凸变椭圆活塞数控车削系统的研究.机床，1993，(8)：32―34
5　邓中亮，王先逵，冯之敬等.用直线电机作刀具进给驱动的变椭圆活塞车削系统的研究.内燃机学报，1994，12(1)：133―138
6　邓中亮.高频响大行程微给机构的研究［博士学位论文］.北京：清华大学，1994
7　吴丹.直线电机微位移装置的设计与实验研究［硕士学位论文］.北京：清华大学，1991
收稿日期　1997-04-14
收修改稿日期　1998-02-20
