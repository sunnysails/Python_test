自动化学报
ACTA AUTOMATICA SINICA
2000　Vol.26　No.3　P.289-295



直接驱动机器人关节加速度
反馈解耦控制
韩建达　谈大龙　蒋新松
摘　要　以利用线加速度传感器实际测量转动关节的加速度为基础，分析了机器人关节加速度反馈控制的开环模型，以及影响其闭环稳定性的主要因素；提出了闭环控制策略的设计准则.在一台三自由度直接驱动机器人上的实验结果证明了该文分析的正确性，与不具备加速度反馈控制时的实验结果相比较，显示出这种方法的有效性.
关键词　加速度，反馈控制，解耦，直接驱动机器人.
JOINT ACCELERATION FEEDBACK CONTROL
FOR DIRECT-DRIVE ROBOT DECOUPLING
HAN Jianda　TAN Dalong　JIANG Xinsong
(Shenyang Institute of Automation,Chinese Academy of Sciences,Shenyang　110015)
Abstract　　The link-couplings of a multi-DOF DD-robot always act as a kind of torque disturbances.Joint acceleration feedback control based on sensed acceleration information will help to resist such coupling effects and improve the joint tracking performance.In this paper,linear accelerometer is used to sense the rotatory joint acceleration and a model is given to describe the sensed open loop resonance,and design criteria for stable and functional control law are also proposed.Extensive experiments are conducted on a threelink DD-robot and the results are presented to validate the analyses and demonstrate the improvements benefited from the proposed method.
Key words　Acceleration,feedback control,decoupling,direct-drive robot.
1　引言
　　n自由度直接驱动机器人的连杆动力学方程为［1］
　　(1)
上式中D(q)∈Rn×n是惯量矩阵；Ψ∈Rn分别是哥氏力向心力、重力、摩擦及驱动力矩向量；q,分别是关节角度、角速度及角加速度向量.
　　对于关节i,式(1)可写成
　(2)，(3)
上式中τni是作用在关节i上的连杆动力学耦合(扰动)力矩；Jii是连杆i的转动惯量；θi,τi,φi,fi分别是向量q,Ψ,φ,f的i行元素；dij,cij分别是矩阵D，C的i行j列元素.
　　对于直接驱动机器人，τni直接作用在关节驱动电机的转子上，是影响机器人跟踪性能的主导因素［3～5］.同时，式(2)和(3)表明，连杆耦合总是表现为作用在关节上的时变力矩扰动.因此，提高关节驱动单元对时变扰动力矩的抑制能力是解决直接驱动机器人动力学控制问题的一条途径.而关节加速度是作用在关节上的合力矩(包括扰动力矩)的最直接反应.所以，本文提出利用实测关节加速度信号进行反馈控制，并要求其达到以下两方面目的：(i)对作用在关节上的时变扰动力矩具有抑制作用；(ii)有足够宽的闭环响应频带，使得由加速度闭环引起的相位滞后对速度、位置闭环控制的影响充分小.
　　上述两方面目标的实现，等价于通过加速度闭环把机器人关节驱动单元由力矩源.
τ=τd　　　　(4)
控制成为加速度源
　　(5)
上式中τd,d分别是期望力矩和期望加速度；τ，分别是两种驱动单元的输出.从而，力矩扰动不再影响关节加速度的响应性能，由n个这样的关节构成的机器人系统，其动力学模型将是n个解耦的双积分环节.


图1　关节加速度的测量
2　关节加速度的测量
　　用于闭环控制的加速度反馈信号不能通过对速度或位置传感器信息的微分计算来得到，因为微分算法对噪声的放大作用以及速度、位置传感器自身的敏感性、响应频带等因素使得这种闭环难以满足上述(i)，(ii)两方面的要求.
　　将线加速度传感器安装在连杆末端，并使其敏感轴沿着关节转动的切线方向，如图1所示，就可以测量转动关节的角加速度.
　　如果关节i的基座是静止的，则
　　　(6)
　　如果关节i是其它连杆的末端(是运动的)，则
　　　(7)
上式中i是关节加速度，fi是线加速度传感器的输出，li是关节轴与加速度传感器之间的距离，g是重力加速度，是关节基座运动对加速度传感器的影响.
3　关节加速度反馈控制
　　关节加速度反馈控制的结构如图2所示.假设关节驱动电机可以被视为理想力矩源，连杆具有理想刚度，而且加速度传感器具有无限宽的晌应频带，即
Gm(s)=Gs(s)=1,　　　(8)
则可将加速度反馈控制策略设计为
Ga(s)=ka,　　　(9)
其中ka是正常数.此时，图2所示系统的闭环模型是
　　　(10)
如果控制增益满足ka》J/Cm且ka》1，则有
　　　(11)
从而，加速度反馈控制抑制了扰动力矩的影响，将关节驱动单元从力矩源控制成为加速度源.但是，条件(8)对于实际机器人系统并不总是成立的.首先，实际连杆的刚度都是有限的，都存在谐振效应；另外，对加速度闭环响应带宽的要求决定了必须采用宽频带的加速度传感器.这种宽频带的加速度计能够检测到由非刚性因素导致的谐振.
　　图2中d，f分别是期望加速度和加速度传感器的输出(实际加速度)；Gs(s)是描述连杆传动以及加速度传感器自身动态特性的传递函数；Ga(s)是加速度控制策略；Gm(s)是关节驱动电机结合电流闭环的传递函数；τn是动力学扰动力矩；是人为加入的电流扰动(等效力矩扰动)；Cm是力矩常数.


图2　关节加速度反馈控制结构
　　由实际连杆的非刚性因素引起的谐振效应是影响加速度闭环稳定性的最主要因素.加速度传感器检测到的谐振可以等效地用Gs(s)表示，并体现在加速度反馈的开环频率响应中.图3是加速度开环频率响应的示意图(只考虑两个谐振峰，其余的多个由于加速度传感器及系统自身的高频衰减特性而被忽略).


图3　加速度开环频率响应θaf(s)/Id(s)
本文提出用如下模型来描述加速度开环特性
　　　(12)
其中θaf(s),Id(s)分别是f(t),id(t)的Laplace变换.根据图2，可得加速度反馈控制的闭环模型
θaf(s)=Gac(s)θad(s)+Gaτ(s)τn(s),　　　　(13)
其中Gac(s)是加速度闭环传递函数，Gaτ(s)是加速度闭环对扰动的抑制函数，且
　　　(14)
　　　(15)
　　设计合适的闭环控制策略，实现引言中提出的关于加速度反馈控制的(i)和(ii)两方面目标，本文提出以下关于Ga(s)的设计准则：
　　(a)式(14)，(15)满足稳定性条件，即方程
1+Ga(s)Gao(s)=0　　　(16)
无右半s平面零点；
　　(b)满足
　　　　(17)
式中ωv是不存在加速度反馈控制时关节速度的闭环响应带宽，φ是给定的相位滞后上限；式(17)将加速度反馈控制在速度闭环内产生的相位滞后约束在期望的范围之内，以此达到几乎不影响速度闭环的要求；
　　(c)满足
　　　　(18)
式中ωτ是τn的带宽，σ＞0.式(18)确保在动力学扰动τn的频带［0,ωτ］内，加速度闭环对其具有抑制作用.
　　满足上述三项准则的控制策略都可以用于加速度反馈控制，衡量加速度控制有效性的标准是它所能够实现的对扰动的抑制作用的大小(能够实际获得的σ值的大小).
　　应该指出，上述开环模型以及控制策略的设计准则都是基于机器人关节驱动单元是理想的力矩源这一假设而建立的.对于实际机器人系统，这个假设通常是不成立的.直接驱动关节一般采用力矩电机作为驱动单元，这种电机具有比较大的电枢电感，对电流响应会产生明显的滞后作用，影响输出力矩的响应性能.虽然关节采用直接驱动结构，但不能将驱动单元的动态特性简单地描述为比例环节.因此，在加速度的闭环频带内把关节驱动单元控制成为近似比例环节的力矩源，是实现加速度反馈控制的必要条件.
4　实验研究
　　在一台三自由度直接驱动机器人(见图4)上，对本文分析作了实验研究.这台机器人的三个关节都采用直流力矩电机驱动；由于电枢电感的影响，它们的电流开环响应频带仅25Hz.为此，我们采用霍尔元件作为电流传感器，通过电流反馈控制克服电枢电感对电流响应的影响.实验结果表明，电流闭环带宽提高了十倍以上，达到300Hz，在加速度反馈控制的频带内，可以将具有电流反馈控制的力矩电机等效为力矩源.
　　以电流反馈控制为基础，在这台机器人的三个关节上都实现了加速度反馈控制，以下给出在第二关节上的实验结果以表明本文分析的正确性，以及加速度反馈控制的有效性.
4.1　加速度反馈控制的实验结果及分析


图4　三自由度直接驱动机器人本体
　　关节加速度反馈控制的实验结构如图2所示，为了显示加速度闭环对时变力矩扰动的抑制作用，我们在期望电流中叠加扰动量.由于电流闭环具有足够宽的响应频带，所以与实际的力矩扰动τn是等效的，加速度闭环对的抑制作用等价于对τn的抑制.
4.1.1　加速度反馈的开环特性　　
　　1)图5，7～10所示的频率响应都是用HP3562A DYNAMIC SIGNAL NALYZER对机器人的实际测量结果.图5是加速度开环频率响应1)θaf(s)/Id(s)(从期望电流id到加速度传感器输出θ　¨f的频率响应)，其中第一谐振峰ωr1≈131Hz,幅值r1≈13dB，相位滞后φ1≈-78°；第二谐振峰ωr2≈200Hz,幅值r2≈17dB，相位滞后φ2≈-180°.据此综合出加速度反馈的开环模型为
(19)


图5　加速度开环频率响应θaf(s)/Id(s)(不存在加速度闭环时加速度与
扰动之间的频率特性θaf(s)/(s))


图6　式(20)的拟合频率响应
　　图6是式(19)的拟合频率响应，与图5相比较，表明式(19)准确地描述了加速度开环频率特性，同时证明式(12)这种四极点两零点模型用于描述加速度开环响应的正确性.另外，从图2可知，图5也是不存在加速度闭环时力矩扰动对加速度响应的影响.
4.1.2　加速度反馈控制闭环特性
　　既然谐振效应是影响加速度闭环稳定性的主要因素，而谐振通常发生在高频带，因此，加速度反馈控制策略Ga(s)应具有低通滤波器的特性.本文采用积分加一阶滞后控制策略，取得了良好的实验结果.依据前面阐述的设计准则，设计控制策略
　　　(20)
　　将式(19)和(20)代入式(16)，可以计算出闭环系统的临界稳定增益为1.67×105.
　　选择ka=1.327×105，图7是加速度闭环频率响应θaf(s)/θad(s),其中θad(s)是d的Laplace变换.图7表明，加速度反馈控制是稳定的，带宽超过60Hz，谐振被有效地抑制.
　　图8是加速度反馈相对于力矩扰动的频率响应θaf(s)/(s),加速度反馈控制对0Hz(定常)扰动的抑制作用是无穷大(因为存在积分调节)，对1Hz扰动的抑制作用为-40.8dB(1/110)，对10Hz扰动的抑制作用为-20dB(1/10).图8与图5相比较，充分显示了加速度反馈控制的有效性，作用在关节上的定常力矩扰动被完全克服，对1Hz,10Hz扰动的抑制作用分别增强了110倍和10倍.实验结果证明了本文提出的设计准则的正确性.


图7　加速度闭环频率响应θaf(s)/θad(s)


图8　存在加速度闭环时加速度对扰动的频率响应θaf(s)/(s)
4.2　加速度反馈控制对速度闭环的影响
　　本文不详细讨论速度闭环控制，仅给出存在、不存在加速度反馈控制两种情况下速度闭环频率特性的实验结果，以表明加速度反馈控制对速度闭环的影响.图9是不存在加速度反馈控制时速度闭环的频率特性θvf(s)/θvd(s),其中θvf(s),θvd(s)分别是反馈速度以及期望速度d的Laplace变换.图10是存在加速度控制时的速度闭环特性(对于图9与图10，速度控制策略、参数均相同).两者相比较表明


图9　不存在加速度闭环时速度闭环频率响应

图10　存在加速度闭环时速度闭环频率响应
5　结论
　　本文旨在通过增强机器人关节驱动单元对力矩扰动的抑制作用来克服机器人动力学耦合效应对控制性能的影响.文中提出的关于加速度反馈控制的目标，以及以此为基础的控制策略设计准则，可以克服谐振效应的影响，保持加速度反馈控制的稳定性，同时发挥加速度闭环对时变力矩扰动的抑制作用，并且将加速度控制对其它调节器的影响约束在期望的范围之内.采用线加速度传感器测量转动关节的加速度，以电流反馈控制为基础，依据提出的设计准则，在一台三自由度直接驱动机器人上实现了加速度反馈控制.实验结果证明了本文分析的正确性，显示了加速度反馈控制的有效性.
“八六三”计划智能机器人主题资助项目.
　　韩建达　1968年生，工学博士.副研究员.主要研究内容包括基于传感器的机器人控制、移动机器人及多机器人集成系统.
　　谈大龙　1940年生，研究员，博士导师.目前主要从事机器人智能控制、多机器人系统等方面的研究.
　　蒋新松　1931年生，1997年故.生前曾任中国工程院院士、“八六三”计划自动化领域首席科学家、中国科学院沈阳自动化所所长.
韩建达（中国科学院沈阳自动化研究所　沈阳　110015）
谈大龙（中国科学院沈阳自动化研究所　沈阳　110015）
蒋新松（中国科学院沈阳自动化研究所　沈阳　110015）
参考文献
［1］　Spong M W,Vidyasagar V.Robot Dynamics and Control.New York:John Wiley & Sons Inc.,1989.
［2］　Hsia T C,Lasky T A,Guo Z Y.Robust independent robot joint control:design and experimentation.In:IEEE International Conference on Robotics and Automation,1988,1329～1334
［3］　An C H,Atkeson C G,Hollerbach J M.Model Based Control of A Robot Manipulator.Cambridge:MIT Press,1988,31～49
［4］　Aoustin Y,Cherki B.Computed torque of robots with estimated velocities.In:IFAC Symposium on Robot Control,1994,17～22
［5］　Liu G,Goldenberg.Comparatve study of robust saturation-based control of robot manipulator:analysis and experiments.Robotics Research,1996,15(5):473～491
收稿日期　1997-02-26
修稿日期　1999-02-11
