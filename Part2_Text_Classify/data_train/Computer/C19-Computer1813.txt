微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
2000　No.19　No.1　P.42，45




一种微电机实时测速方法
姜卫东
摘要： 一种新的微电机实时测速方法以及基于这种方法实现的测速设备的设计思想、系统结构及功能。
关键词：微电机 实时测速 采集卡
　　检验微电机质量的关键在于检测其转速变化曲线、电流变化情况、电机在负载和空载时的转速变化情况。传统的测量方法一般可以分为3步，即：（1）利用光电技术产生1组与转速对应的方波；（2）通过计数仪对方波计数；（3）与基准时间比较得出在一段时间内电机的平均转速值。这种方法存在潜在的缺点。首先，由于这种方法计算的转速是对一段时间内方波数量的计数，得出的是一段时间内电机的平均转速，因而它不能实时测量电机的转速，无法得到准确的电机的时间－转速曲线；其次，当电机低速转动时，测量精度低。
　　本文提出1种实时微电机测试系统方案，主要针对传统测速系统的不足，在克服以上缺点的同时，根据实际电机生成部门的具体需要，以实现微电机测速方便、快捷、灵活的特性。
1 系统结构及功能
　　针对传统测速系统的缺点，本文提出如下方案：在传统方法的第2步对方波进行一定速率采样，通过接口电路，把采样数据送入计算机，计算机对数据进行处理、分析，得出时间－速度曲线、时间－电流曲线以及有关的参数信息，自动确定微电机质量合格情况，并把相关的信息存入已建立的数据库中，为以后的质量分析提供详尽的数据资源。系统结构如图1所示。系统工作流程如下：
　　微电机通过多功能转换头与微电机转速光电转换器相连接，电机每转动1转则产生1个一定宽度的脉冲，因此，微电机转速光电转换器输出1组与电机转速对应的脉冲串，脉冲串被AD采集卡按给定的速率采集，同时被采集的还有微电机电流，采集的数字量通过接口电路传送到计算机，计算机根据采样速率和每个方波的采样点数计算微电机每1转的转速和与此对应的工作电流，并给出转速时间曲线和电流时间曲线。
　　整个过程由计算机控制，计算机发出开始指令，通过接口电路对AD采集卡和光电转换器复位，光电转换器接通微电机电源，微电机开始工作。同时，计算机开始读取采集的数据，当满足设定要求（如采集时间控制、采集数据长度控制、微电机稳定转速平稳控制、电流稳定控制等）时计算机停止读取数据，并发送停止信号给光电转换器以断开微电机电源，测量结束。
　　从图1可以看出，系统采用对每个方波进行采样的方法计算转速，其转速曲线与微电机的转速完全一致，因此，用此方法测量的是微电机的实时转速，且转速精度完全由采集卡的采样率决定，因此，只要改变采集卡的采样率以满足需要，就可以获得很高的测速精度（如精度为1转以下的测量，传统方法是不能做到的），这对测量微电机在无负载和有负载时的转速变化尤为准确、可靠（这也是微电机质量检验的关键）。

图1 系统结构框图
　　由于引入了微机，建立了微电机测量数据库，并配有丰富的处理、分析、统计、绘图、打印软件，使得管理者对产品质量分析和统计非常方便（如一段时间内测量的微电机转速分布曲线、不合格产品分布曲线、有无负载时电机电流变化曲线等），这也是本微电机测速系统的一大特色。系统主要完成以下功能：（1）实时测量转速；（2）实时测量电流；（3）可变精度测量；（4）系统的显示、打印、统计、分析等。
2 设计思想
2.1 可变速率AD采集卡
　　AD卡为双通道可变速率采集卡，采集芯片采用多通道复用芯片，以实现对转速方波和电流信号交叉采集（即奇数点采集转速信号，偶数点采集电流信号），这样采集的好处是保证微电机的转速和电流在同一时刻是一一对应的。通道间转换由外部数据指定。由于采集芯片以2通道交叉方式工作，因此采样速率为系统时钟的一半。在需要的情况下也可以由计算机设定只采集某1路信号。AD卡的可变采样速率是通过改变时钟频率来实现的；晶体振荡器输出的脉冲通过16进制计数器分频，输出2、4、8、16 4路分频结果，把这4路分频结果与时钟信号输入至模拟开关，模拟开通断情况由寄存器控制，模拟开关的输出与采集芯片的时钟引脚连接。采集卡的结构框图如图2所示。

图2 2路变速率采集卡框图
2.2 接口电路
　　接口电路与采集卡同在1块电路板上，由于采集卡的采集速率不高（不超过30KB／s），接口采样ISA总线，系统采用查询方式通过接口访问缓存。接口电路主要完成地址选择，数据的出入以及发送控制命令。其结构框图如图3所示。

图3 接口电路框图时钟
2.3 软件设计
　　微电机测速系统软件包括5个部分，分别为：系统设置、数据处理、报表统计、打印输出、帮助信息。
　　系统设置：包括采集数据长度设置、采集时间设置、触发方式设置、数据处理结果显示设置、图形显示方式及种类设置等。
　　数据处理：包括对本次测量结果分析和本次前多个测量结果的统计分析，以得出关心的参数（稳定转速、稳定转速方差、前多个测量结果分布图等）。
　　报表统计：完成数据库报表统计功能。如1天或1个月检验情况报表输出。
　　打印输出：完成某1次测量分析结果的参数和图、表输出及报表输出。
　　帮助信息：提供必要的软件使用说明。
　　本文提出的微电机实时测速方法不但克服了传统微电机测速的缺点，而且具有功能完善、结构简单、设备成本低、使用灵活方便等特点。实际应用表明，该设备达到预定技术指标，且大大提高了检验效率。
姜卫东（长沙国防科技大学电子工程学院ATR室410073）
收稿日期：1999－08－27
