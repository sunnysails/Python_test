自动化学报
ACTA AUTOMATICA SINICA
2000　Vol.26　No.1　P.61-67



受限柔性机器人基于遗传算法的自适应模糊控制
樊晓平　徐建闽 毛宗源
摘 要 研究一类平面双连杆受限柔性机器人的混合位置／力控制问题，提出一种自适应模糊逻辑控制方案，利用遗传学习算法对控制器中的参数进行学习和修正，达到提高系统控制精度、改善系统鲁棒性的目的.计算机仿真结果表明这种控制器设计方案具有很好的特性.
关键词 受限柔性机器人，位置／力控制，遗传算法，自适应模糊控制.
GENETIC ALGORITHM BASED ADAPTIVE FUZZY CONTROL FOR
CONSTRAINED FLEXIBLELINK MANIPULATORS
FAN Xiaoping
(Institute of Information and Control Engineering, Changsha Railway University,Changsha 410075)
XU Jianmin MAO Zongyuan
(Dept. of Automatic Control Engineering, South China University of Technology,Guangzhou 510641)
Abstract In this paper, the hydrid position and force control problem is discussed for a class of planar twolink constrained flexible manipulators. A GAbased adaptive fuzzy control scheme is presented to control the tipposition and the contact force, and a digital genetic algorithm is used to update the parameters of the controller so as to enhance the control precision and improve the robustness of the system. Computer simulation results demonstrate that the controller design method presented here has very good performance.
Key words Constrained flexible manipulators, position／force control, genetic algorithms(GAs),adaptive fuzzy logic control.
1 引言
　　模糊逻辑已经广泛而成功地应用于诸如电子防震摄像机、自动聚焦照相机、洗衣机、空气调节器、水泥窑等各种实用场合.但是，这种设计方法也存在一些不足之处.首先，模糊控制规则都是面向知识和经验的，对操作者的控制策略建立可靠的语言模型并非易事.其次，当系统参数的变化超出操作者经验范围时，需要对模糊控制器进行重调.第三，一个模糊控制系统的动态性能不能先验确定.因此，模糊逻辑控制器的应用也就相应受到限制［1］.
　　为了改善模糊逻辑控制器的性能，提高控制系统的鲁棒性，L.X.Wang(1994)对自适应模糊系统进行了深入研究，提出了几种模糊逻辑系统训练和自适应控制的有效方法［2］.此后，一些改进的控制方案也相继提出［3.4］.一般而言，一个自适应模糊系统就是一个带有训练或学习算法的模糊逻辑系统.这里，模糊逻辑系统是由一组模糊IF-THEN规则构成，而训练或学习算法则依据输入输出数据来调整模糊逻辑系统的参数.因此，训练或学习算法对于系统的控制性能起着十分重要的作用.由于遗传算法(GAs)是一种全局、鲁棒且与数据无关的搜索技术，因而有可能成为自动、有效地搜索控制器参数以获得较好控制性能的一种好方法［5～7］.
　　本文利用遗传算法杰出的寻优能力，提出一种基于遗传算法的自适应模糊逻辑控制方案来控制一台双连杆受限柔性机器人终端执行器的运动.该系统具有文献［2］所描述的自适应模糊逻辑系统的形式，但控制器参数则利用一种简单而有效的十进制遗传算法优化程序进行确定.
2 受限柔性机器人的动力学模型
　　考察图1所示由一根刚性连杆和一根柔性前臂构成的受限机器人系统.假设系统末端要求在一光滑曲面上滑动，即受如下约束：
Φ(x,y)=0　(1)

图1 受限平面两自由度柔性机器人
式中(x，y)是某一平面上的惯性笛卡尔坐标变量.图1中，θ1,θ2分别是关节1的转角和关节2的虚拟转角，w(r,t)记为柔性前臂相对于虚拟刚性连杆在时间t和空间点r(0≤r≤L2)处的横向位移(当实际连杆位置低于虚拟刚性连杆时为正，否则为负)；L1和L2分别是连杆1和连杆2的长度；fn是约束力(接触力).
　　根据图1选定的坐标，由振动理论知，柔性前臂的横向位移w(r,t)可用一截断的n阶振型函数来表示，即
　(2)
式中qi(t)表示时变广义坐标(i=1,2,…，n).
　　于是，利用文［8］中的结果，在一定假设条件下，该刚性柔性机器人系统的动力学模型可以表述为
　(3)
式中其它各分量的具体构成见文［8］.
　　上述模型还可进一步简化为［9］
　(4)
　(5)
式中θ2=Ω(θ1)是由约束方程(1)所导出的隐函数关系，其他各元素定义见文［9］.
　　我们的任务就是确定控制律τ，使得系统输出θ按照指定的规律变化以保证机器人终端执行器始终在约束面上无滑动地移动，并使机器人终端执行器与约束面之间的接触力满足给定的要求.
3 自适应模糊逻辑控制器
　　假设系统模型(4)，(5)中函数矩阵和函数向量已知，则可选择理想控制律为
　(6)
式中是电机1的期望转角，λd是与期望接触力相对应的期望lagrange乘子，Kv和Kp是正常数，Kf≠1是力反馈增益.代入原始模型(4)和(5)式，得闭环系统
　(7)
　(8)
此时显然有
　(9)
即理想控制律(6)可以同时实现柔性机器人终端执行器的混合位置／力控制.然而，遗憾的是，由于函数矩阵和函数向量在实际控制过程中往往是未知量且难以精确辨识，上述理想控制律τ*一般无法实现，因而也就不能获得理想的控制效果.
　　为了改善控制，解决模型不准确或未知时的控制问题，人们提出采用模糊逻辑系统方法来实现模糊逻辑控制.业已证明，自适应模糊逻辑系统可以任意精度逼近任何实连续非线性函数，即有如下万能逼近定理(Universal Approximation Theorem)成立：
　　定理1［2］对于紧集U∈Rn上任何给定的实连续函数g和任意ε>0，必存在一个模糊逻辑系统f
　(10)
使得
　(11)
式中各参数可根据自适应律加以确定.
　　利用文［2，3］类似的思想，可将控制器设计为模糊自适应控制律
τ=τc(x｜γ)，　(12)
式中γ为系统的可调参数向量，x为系统状态向量，
　　选取单点(singleton)模糊化、中心平均去模糊化、Gauss隶属函数以及和-积模糊推理规则，于是，模糊自适应控制律τc(x｜γ)可以写成(10)式的形式
　(13)
其中M为规则数，k为状态数，k=3，为第l条规则中结论隶属度为1所对应的输出值向量，
分别为第i个状态对应于第l条规则隶属函数的期望均值和方差.显然，该模糊逻辑系统的可调参数为它们分别满足约束关系：为分析简单起见，不失一般性，假设
　　于是，根据定理1的结果，我们有如下命题成立：
　　命题1. 若能恰当选择系统可调参数向量γ，使得
　(14)
则将同时实现柔性机器人终端执行器的混合位置／力控制.
4 基于遗传算法的参数学习算法
　　由命题1可知，为了获得良好的控制效果，必须首先恰当地选择或确定自适应模糊逻辑系统中的各个参数.为此，结合图2的遗传搜索过程，我们提出如下遗传学习算法：

图2 遗传搜索过程结构示意图
　　步骤 1.在解空间上随机产生初始化种群(种群大小取为N).可调参数包括和因而必须对所有参数均设定初始化种群，其变化范围分别为

1,2…,M当控制对象参数发生变化时，上述参数变化范围也应作相应修改.
　　Step 2.根据性能要求确定适应度函数.由于控制目的是使得受控对象――柔性机器人的末端位置和接触力满足给定指标要求，我们可以取适应度函数为
　(15)
式中C0是一个很大的正数，用以保证fitness(.)>0.
　　步骤 3.计算所有染色体的适应度.
　　步骤 4.按轮盘赌方式，按一定的概率分布从当前种群中产生候选的复制输出(这样将使得具有较高适应度的染色体有更多的子代遗传到下一代).
　　步骤 5.对于被选定复制的染色体，产生一个与其适应度成正比的复制品，并送入配对池作为新的父代.
　　步骤 6.利用浮点交叉和变异算子，通过交叉和变异产生新的种群.浮点交叉算子的基本功能是：随机选取两个父代染色体彼此交换遗传信息以产生两个新的子代染色体，直到获得与原种群相同个数的染色体为止.一般情况下，交叉率(crossover rate)常选为0.7左右.这种浮点交叉算子可以用数学描述为
IF 父代为(ωn1，kf1)和(ωn2，kf2)，THEN
　(16)
　(17)

图3 十进制(浮点)遗传算法功能框图
上式中α∈(0，1)是一个随机数.变异过程则是按照一定的变异概率(一般取0.1～0.2左右)改变选定个体的遗传信息，从而引入新的遗传信息得到新的个体的过程.假设选定的个体由十进制数对(ωn，kf)描述，其在变异时的最大变化量分别为(ωn,max,kf,max)，则经过变异后的新个体变为
　(18)
式中α1,α2∈(0，1)均为随机数.
　　Step 7.重复以上步骤，直至找到最优解为止.
　　上述流程可以用图3所示的十进制(浮点)遗传算法计算框图表示.
5 计算机仿真
　　考虑一台平面双连杆受限柔性连杆机器人，其结构参数见文［9］.要求该机器人的终端执行器在约束面Y=-X+3上运行，且沿约束表面法线方向的接触力保持为希望值.于是，对应的约束条件变为
　(19)
由此容易得到对应的隐函数关系θ2=Ω(θ1).
　　假设要求机器人系统终端执行器与约束面之间的接触力为fdn=20N.于是，容易求
得系统的期望Lagrange算子为
　(20)
　　利用前述遗传学习算法对上述实验机器人进行计算机仿真.设定遗传算法中的选择概率为0.65，交叉概率为0.7，变异概率为0.1，适应度函数中的常数C0选择为25.于是，经过500次迭代学习后分别得到受限柔性机器人的连杆实际输出转角和Lagrange算子变化曲线如图4所示.作为对比，以上各图中同时还画出了各自的期望曲线.图5则是机器人终端执行器与接触面之间的接触力曲线.

――期望曲线 实际曲线
图4 期望输出变化曲线和实际输出变化曲线

图5 期望和实际接触力f变化曲线
6 结论
　　本文利用遗传算法(GAs)讨论了受限柔性机器人自适应模糊逻辑控制器设计问题，提出了对控制器参数进行调整的遗传学习算法.利用业已建立的简化的受限柔性机器人动力学模型，借助于文［2］研究的自适应模糊逻辑系统结构，通过遗传学习算法对控制器参数进行学习和调整，实现了对受限柔性机器人的混合位置／力控制.计算机仿真结果表明，本文提出的基于遗传算法的自适应模糊逻辑控制方案既具有很高的控制精度，又克服了一般模糊逻辑系统参数难以优化设计的困难，是一种有效的受限柔性机器人智能控制的好方法.
樊晓平 1961年生.1982年1月、1984年9月和1998年3月分别在江西工学院电机工程系、长沙铁道学院电子工程系和华南理工大学自动控制工程系获工学学士、硕士和博士学位.现任长沙铁道学院信息与控制工程研究所所长、教务处处长、教授.目前的研究领域为自适应控制，鲁棒控制，智能控制，机器人控制，CIMS等.
徐建闽 1960年生.1982年1月在江西工学院电机工程系获工学学士学位，1988年和1994年分别在华南理工大学自动化系获工学硕士和博士学位.现任华南理工大学科研处处长.教授，博士生导师.主要研究领域为自适应控制、鲁棒控制、智能控制、现代交通工程，CIMS，机器人控制等.
毛宗源 1936年生.1962年大连工学院船厂船舶电气自动化专业毕业.现为华南理工大学自动控制工程系教授、博士生导师.主要研究领域为工业自动化、模糊控制、神经网络、智能控制等.
国家自然科学基金(69975003)和湖南省自然科学基金(98JJY2044)资助项目.
樊晓平(长沙铁道学院信息与控制工程研究所 长沙 410075) 
徐建闽(华南理工大学自动控制工程系 广州 510641)
毛宗源(华南理工大学自动控制工程系 广州 510641)
参考文献
1，Zhang B S, Edmunds J M. Selforganizing fuzzy logic controller.In:IEE ProceedingsD，1992，139(5)：460～464
2，Wang L X. Adaptive Fuzzy Systems and Control:Design and Stability Analysis. Englewood Cliffs:PTR Prentice Hall,1994
3，张乃尧，金晖.对稳定的模糊自适应控制方案的研究与改进.自动化学报，1997，23(2)：160～166
4，Fan Xiaoping, Xu Jianmin, Mao Zongyuan, Zhou Qijie. Adaptive fuzzy control of constrained flexiblelink ,anipulators.Int.J.of Plant Engineering and Management,1997，2(4)：235～245
5，Tarng Y S, Yeh Z M, Nian C Y. Genetic synthesis of fuzzy logic controllers in turning.Fuzzy Sets and Systems,1996，83：301～310
6，Shi G. A genetic algorithm applied to a classic jobshop scheduling
problem.International Journal of Systems Science,1997，28(1)：25～32
7，Ge S S, Lee T H, Zhu G. Genetic algorithm tuning of Lyapunovbased controllers:An application to a singlelink flexible robot system.IEEE Trans.Industrial Electronics,1996，43(5)：567～574
8，樊晓平，颜全胜，徐建闽等.平面双连杆受限柔性机器人臂的动力学建模.控制理论与应用，1998，15(6)：933～938
9，樊晓平，徐建闽、毛宗源等.平面双连杆受限柔性机器人臂的模型简化及其控制.高技术通讯，1998，8(10)：15～20
收稿日期 1998-04-16 收修改稿日期 1999-03-04
