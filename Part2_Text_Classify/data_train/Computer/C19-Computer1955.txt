微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
1999年 第18卷 第1期 Vol.18 No.1 1999



提高局域网工作站访问速度的一种简便方法
陈庆章
　　摘　要：学校中一般使用计算机的环境是机房，而且很多情况下是许多学生同时去访问服务器，由此造成访问速度上的瓶颈状态，用户纷纷抱怨网络速度太慢，尤其是运行基于Windows环境的软件和访问Internet网。本文提供一种简便方法，不需要增加投资去安装新的硬件或软件，只要改变网络的结构，就可以大幅度提高访问网络的速度。
　　关键词：局域网络　工作站　访问速度　网络吞吐量
1　问题
　　CERNET的建立，将全国许多大专院校的校园网络和科学研究机构的网络连接在一起，给用户提供一个教育和研究资源共享的环境。如今，使用电子邮件(EMail)、文件传送(FTP)、电子布告栏(BBS)、全球信息网络(WWW)的用户与日俱增。由此带来的不适应是：许多学校的局部计算机网络本来速度就慢，现在更是雪上加霜，在机房上机用户总是抱怨速度太慢，实际上已经影响到用户工作的效率和耐心。
　　提高用户访问服务器资源的速度、降低传输拥塞现象、提高网络的吞吐量，已成为计算机机房必须重视的问题。解决这一问题的方法可以很简单，只要网络升级，如将现在的10Mb/s网络升级到100Mb/s网络，或提高服务器和网络工作站的CPU速度和内存即可。但学校普遍面临经费不足，无法实现这一耗费可观的升级。所以，如何在不投资的条件下，加快访问速度是计算机机房管理者煞费苦心的事。
　　目前多数学校的计算机机房都是采用通过文件服务器将许多计算机连接到一起，然后再通过校园网络和电信局专线与CERNET连接。其结构如图1。

图1　传统的计算机机房的网络结构（以细缆为例）
　　这种连接方式的主要缺点在于网络交通瓶颈限制计算机的数据传输速度。因此，多人在网络上同时执行基于Windows程序的速度要比个人在单机上使用时缓慢得多。当然，造成计算机房网络执行速度缓慢的原因还有，如文件服务器速度不够快、连接计算机数量过多、计算机内存不足、网络结构不当等。在连接计算机数量与计算机内存固定的情况下，网络执行的速度主要取决于文件服务器的速度和网络的频宽。一般而言，文件服务器的速度随着CPU速度的增快而提高，而计算机网络因使用的结构与设备不同，其所提供的频宽也有差异。在没有经费限制的情况下，使用较快的主机和网络设备、增加计算机内存容量当然可以提升在网络上执行的速度，但在经费限制的情况下，巧妙地规划网络结构，同样能达到提高网络使用速度的目标。
2　解决方法
　　以我校为例，计算机中心原来有2间计算机机房，分别将计算机用网络串接到2部基于486的文件服务器上，上计算机课时经常感到执行基于Windows的程序速度过慢，而且2间教室文件服务器上的数据内容也随着长时间使用而逐渐不一致，给老师和学生造成若干困扰。为提高网络的访问速度，我们进行了一些实验，通过在服务器中安装数量不同的网卡而形成不同的网络结构，对网络的访问速度有重大影响。所做的实验有：
　　(1)文件服务器速度测试；
　　(2)不同网络结构下数据存取碰撞率和延迟时间测试；
　　(3)单服务器与双服务器CPU使用率比较。
　　表1所示为2间计算机机房在使用不同文件服务器及网络结构的情况下，同时执行基于Windows程序的测试结果。其中延迟时间的计算是以教室内最后1部计算机完成进入系统的时间为准，而CPU的使用率则是以高峰用量所测得数据为准。网络卡数量是指安装在服务器中的网卡数量。
　　表1的结果显示，增加文件服务器中网络卡的数量可明显地减少网络瓶颈和延迟时间，而在CPU使用率饱和之前，网络执行速度主要取决于网络的结构(即网络卡数量)。于是，我们决定用1部基于586CPU的文件服务器，其中插4块网卡来连接2间计算机教室的计算机，这中间当然也同时考虑到方案的经济性。图2所示为网络结构图，其中计算机教室部分由细同轴电缆和4块网卡与文件服务器连接，每块网卡分别串接了20部个人计算机(注意!是每间计算机机房各10部)，而文件服务器与校园网络部分则通过另1块网络卡与路由器(Router)相连。用户可通过路由器与传输控制通信协议(Transmission Control Protocol)及互连网协议(Internet Protocol)的设定与Internet网连接，直接使用CERNET上的各项资源。
表1　同时执行基于Windows程序的测试结果
基于486文件服务器+80部个人计算机

网络卡数量/块延迟时间/sCPU使用率
1(接80台计算机)24520%～30%
2(各接40台计算机)12540%～50%
4(各接20台计算机)8580%～90%

基于586文件服务器+80部个人计算机

网络卡数量/块延迟时间/sCPU使用率
1(接80台计算机)16510%～20%
2(各接40台计算机)8520%～30%
4(各接20台计算机)5040%～50%


图2　改进后的网络结构图（以细缆为例）
　　为什么每块网卡连接不同计算机机房的10部计算机，而不是同一间计算机机房的20部计算机呢?从机房的使用情况来分析，当一间计算机机房空下来不用时，另一间计算机机房可同时通过4块网卡来访问文件服务器上的数据，即使是2间教室同时使用，根据概率分析，2间教室老师同时下命令要同学操作的机率也比较低，所以这种连接方式在大部分时间都可保持每块网卡有较低的负载和碰撞率，若是将每块网卡串接到同一间计算机教室的20部计算机上，则经常会出现有一半的网络通道非常忙碌，而另一半网络通道闲置不用的情况，此一现象在先前测试不同网络结构时已充分显示出其差异性。用一部高效率文件服务器和多块网络卡的优点：
　　(1)可保持单一教学环境；
　　(2)减少网络碰撞率和延迟时间；
　　(3)简化通往CERNET的TCP/IP与IPX的设定；
　　(4)几乎不需要任何投资。
　　另外，最好能将计算机教室的网络交通流量与校内其他使用单位适当地隔开，以免影响整个校园网络的速度。因为计算机教室在上课时其网络上的交通流量非常大，尤其是在使用基于Windows的应用时。隔开的方式可在文件服务器的上一层加装桥接器，若其上层已经有路由器就不用再加装桥接器，因为二者都有过滤不同区段信号的功能。
作者单位：杭州浙江工业大学信息工程学院(310014)
(收稿日期：1998-07-03)(上接第30页)
