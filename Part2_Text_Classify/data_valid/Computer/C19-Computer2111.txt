计算机工程
COMPUTER ENGINEERING
1999年 第25卷 第12期 vol.25 No.12 1999



基于分色和一种新有去噪算法的地图自动输入技术
沈琳琳　陈洪亮　向　峥
　　电子地图数据库是地理信息系统(GIS)的核心所在，也是交通路线引导系统不可缺少的一部分。只有建立数字地图数据库，才能实现诸如无级放大、搜寻最短路径等功能。
　　因为数字地图数据库包含数据量大、数据类型多，所以开发周期长。若采用数字化仪，一般开发全国性的数字地图数据库需要几年甚至十几年的时间，且耗费大量人力、物力；若能实现自动输入和数字化，则可节约大量人力、物力。
　　本文主要研究如何实现地图自动输入和数字化，最终建立电子地图数据库。所用方法主要包含4个部分：路径抽取、预处理、城市识别和矢量化。
1 实现流程
1.1 彩色空间选择和路径抽取
　　在用计算机进行彩色图象处理时,采用何种彩色空间是非常重要的。一般采用的彩色空间有RGB、HLS、HBS、YIQ等。使用RGB彩色空间时，其R、G、B分量均具有较强的明度因子且彼此之间相关，因此，随着明度的不同容易产生错误的分割。同时，由于R、G、B中均含有明度、色调和饱和度，所以处理不易实现。在利用HBS或HLS彩色空间时，由于其3个分量相对独立，易于对某个分量进行处理，可以克服以上几个缺点。但是其H分量只在有限情况下有意义(特别是当R=G=B时存在本征奇点)，不适合用计算机进行处理。更重要的是H和S分量受图纸质量(如偏色等)和照明影响较大，两者往往在试验中是不可避免的。另外，HLS或HBS是RGB的非线性变换，计算耗费较大。
　　采用RGB彩色空间的线性变换空间[3]I1-I2-I3，其表达式为：
　　I1=(R+G+B)/3
　　I2=R-B
　　I3=(2G-R-B)/2
I1为彩色空间的明度分量，I2分量能有效区分棕色和蓝色，I3分量能突出绿色，因此较适合于我国三色或四色地图的彩色分层处理。
　　抽取路径时，首先对位图中道路上的点进行采样，即选择性地抽取道路上的样点，分别记录其I1、I2、I3的值，在样点数有一定规模后，计算这一样本空间的平均值和方差。然后对位图的每个象素逐一进行扫描，判断其是否属于这一样本空间，如是则置为黑点(1)，否则置为白点(0)，最后得到一张仅含路径信息的二值图象。
1.2 预处理
　　(1)噪声消除和膨胀、腐蚀
　　在得到的二值图中，由于阈值选取存在误差、扫描误差等原因，因此存在不少孤立的噪声点或点集，同时得到的路径信息也会存在断点。若采用高斯滤波、中值滤波等方法，会造成图象模糊、效果不好。鉴于道路的连续性，采用以下算法消除噪声。
　　设函数f [a*a]，表示在一正方形区域a*a中前景点(黑点)数目，则满足下式：
　　f [(a+2)*(a+2)] = f(a*a)　　　　　a=1，3，5
的点集是噪声，应予消除。具体算法如下:
　　设采取从左到右、从上到下的顺序，对于每个当前象素点A(i,j)
　　1)判断此象素是否为前景点(1)，是则继续，否则退出继续搜索；
　　2)计算以此前景点A为中心的3*3窗口内前景点的个数S3；
　　3)计算以此前景点A为中心的5*5窗口内前景点的个数S5；
　　4)判断S3和S5是否相等，是则继续，否则退出；
　　5)计算以此前景点A为中心的7*7窗口内前景点的个数S7；
　　6)判断S5和S7是否相等，是则继续，否则退出；
　　7)以当前点A为中心的7*7窗口内的点集为噪声点集，应予消除，将此点集全部赋为0(背景点)。
　　一般计算到7*7窗口已经足够，窗口再大反而会误将道路删除。
　　对于路径中间隔不大的断点，则可采用膨胀的方法消除，而腐蚀则是膨胀的逆操作，用它保持图象的不变性。膨胀和腐蚀都是图象处理中常用的方法。
　　(2)细化
　　在得到的二值图中，道路的宽度一般都大于1，这样的图跟踪起来是很困难的。细化是指将线路的边界点消除，只留下骨架象素，从而使其宽度成为单象素宽。其通常步骤为：逐一扫描前景点(黑点)，根据其八邻域值判断其是可删除象素还是骨架(保留)象素，并不断进行迭代，直到不存在可删点为止。
　　需要注意的是，在判断某一点是否可删除之前，需判断其是否为端点(邻点数为1)，如是，则应予保留。
1.3 城市识别
　　在交通图中，各城市用一小圆圈表示，半径因城市等级而异。对城市识别可采用常用的Hough变换[2]法。具体可参考有关书籍，在此将不予叙述。
1.4 矢量化
　　矢量化是将原始的点阵图转化为计算机可识别和查询的最后一步。它用一组带参数的图元(如一次或二次曲线、箭头等)去拟合原有的位图点阵信息，从而达到在识别信息的同时压缩信息的目的。本文主要采用折线段逼近法，主要步骤可参考文献[5]。
2 实验结果及结论
　　利用上述方法对图1路径进行识别、抽取，得到图2。再进行滤噪、细化等预处理之后得到图3。最终得到两张数据表，一张为城市表，一张为道路表。

图1 原始图

图2 对图1路径进行识别和抽取的结果

图3 对图2进行滤噪细化处理的结果
　　通过实验说明本方法对于交通图中路径识别抽取、矢量化到最终建立数据库，具有较好的效果。且整个过程不需人工干预，对上述图1处理只需2分钟左右，比用数字化仪大大节省了时间。
作者单位:上海交通大学信息与控制工程系,上海200240
参考文献
1 Auckland D W.Automatic Map Reading for Distribution System Design.IEE Proc.Gener.Trans.Distrib,142(6)
2 Yamada H.Directional Mathematical Morphologh and Reformalized Hough Transformation for the Analysis of Topographic Maps.IEEE Trans.Pattern Analysis and Machine Intelligence,15(4)
3 Yu-ICHI OHTA,et al.Color Information for Recog Segmentation Computer Graphics and Image Processing.1990,13: 222-241
4 朱海洲，姚耀文.地图等高线矢量化的图象处理.小型微型计算机 系统,1996,12:43-46
5 徐建华.图象处理与分析.北京：科学出版社,1992
