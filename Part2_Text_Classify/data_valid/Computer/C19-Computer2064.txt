计算机工程
COMPUTER ENGINEERING 
1999年 第25卷 第5期 Vol.25 No.5 1999



城市轨道交通系统中的广播系统研究
薛小平 阮永良 何明德
摘要 主要研究了适用于城市轨道交通的广播系统，根据城市轨道交通的实际情况提出了具有二级控制功能的广播系统国产化模型。模型通过通信传输系统将控制信号远程，高速地传送给车站广播控制台，车站广播控制台根据中央控制室的控制命令执行正确的动作。提供了利用监测台来自动监视全线车站广播设备运行状态。在该模型的实现过程中，采用分层设计，模块化和面向对象的程序设计技术，得到了较为满意的效果。
关键词 城市轨道交通 广播系统 二级控制 国产化
Domestic-made in Own Country for Urban Traffic Broadcast System
Xue Xiaoping Yuan Yongliang He Mingde
（Department of Computer Science and Technology，Shanghai Tidao University Shanhai 200331）
[Abstract] A two-stage controlled Urban Traffic Broadcast System has been studied in this paper，We suggest the model and design for two-stage controlled Urban traffic broadcast system，and the idea to use a monitor to supervising the status of the whole system according to the circumstances of our country
[Key words] UTBS ；Broadcast system；Two-stage control；Domestic-made
　　近年来，城市轨道交通的发展越来越迅速。广播系统作为城市轨道交通建设中不可缺少的一个部分越来越受到人们的重视。城市轨道交通的广播系统要求能在紧急的情况下，立即由中央广播控制台通过各车站广播控制台向全线所有乘客和工作人员发布各种通告、信息等，使信息能及时传达至乘客和工作人员。然而国内的广播系统一般是单点控制，即只能控制一定范围内的广播区域，无法实现城市轨道交通对全线所有车站或部分车站的广播控制功能。因此，大城市轨道交通建设的广播系统必须引进国外先进的具有二级控制功能的广播系统，以满足城市轨道交通建设的需要。本文是在近一年的开发和研究基础上，介绍了我们所实现的一个具有一定实用价值的广播系统。
1 城市轨道交通广播系统模型
　　城市轨道交通广播系统主要采用二级控制模型来实现，所谓二级控制是指：在中央控制台和车站控制台均采用计算机控制，车站广播控制台能控制本车站的广播设备和负载区域的广播功能，中央控制台也可以直接控制车站广播设备和负载区域的广播功能，这样对同一个车站广播设备和负载区域的控制就有2级，一级是车站广播控制台，另一级是中央广播控制台(如图1所示)。

图中：实线表示控制信息流，虚线表示话音信息流
图1 二级控制系统模型
　　在二级控制的广播系统中有两种信号需要进行传输，一是话音和音乐等音频信号；二是二级控制的控制信号(图1中分别用实线和虚线表示)。音频信号可以直接接入SDH/PDH中某个通道，实现长距离的传输，由于这一技术目前已十分成熟，本文不再讨论。二级控制的关键是将中央控制台的控制命令通过传输系统正确无误、快速高效地传送到车站控制台，并且车站控制台能根据中央控制台的命令产生相应的动作(诸如：打开负载区、查询设备故障情况、信源选择等)。
　　城市轨道交通广播的二级控制结构通常采用两种方式，一种是串联方式，如图2所示；一种是共线方式，如图3所示。


　　所谓串联方式是指各车站的车站控制台的通信接口都由传输线路串接起来，(上海地铁一号线引进德国西门子的广播设备采用的是串联方式)。其特点是实现较容易，连接方便，但是由于所有车站的通信接口都串接在传输线路上，一旦某一个车站的通信接口出现故障，中央控制台将无法控制由其开始的所有后续车站，故障概率相对较高。
　　所谓共线方式是指各车站控制台的通信接口都并接到传输线路上的通信控制方式。其特点是连接可靠，不会出现一个车站故障而影响其他车站的正常工作的情况，易于扩展车站，但是在开发控制软件时，实现较困难。
　　由于城市轨道交通的车站相距较远，维护人员对车站设备状态的检测工作量很大。为此，在整个系统中还设计了一个能检测全线所有车站广播设备状态的监测台。各个车站控制台定期地检测整个车站内广播设备状态，一旦车站中某个设备发生故障，立即引起中断，通知监测台，监测台在接收到某个车站故障信息后，立即通知维修人员。
2 二级控制系统的控制方式与实现
2.1 硬件结构与接口
　　根据分析，在本研究和开发过程中，采用共线方式实现二级控制。但是由于城市轨道交通具有以下特点：站间距离一般都在2km以上，如果控制信号采用基带信号进行传输，一方面要增加线路投资；另一方面基带传输的距离不可能很长。因此，必须将基带信号转变成适合传输系统传输的信号后，接入传输系统。
　　具体实现时，鉴于车站的实际情况，即传输设备与广播设备之间存在一定的距离，因此，必须延长车站内的基带信号的传输距离，在实验系统中我们采用V.24标准进行传输控制，为了延长基带信号的传输距离，需要对V.24进行转换，将V.24信号转换成具有平衡发送，差动接收电气特性的信号，目的是延长传输距离。在传输系统接入点再将其转换成V.24信号。V.24可以直接接入DSH。但是由于车站的设备和型号是多种多样的，因此，在基带传输方面，还可能采用其他通信的方式如V.35，V.10等。
2.2 城市轨道交通广播系统控制软件设计
　　采用模块化程序设计的思想，运用面向对象的程序设计技术(OOP)以及分层设计技术实现二级控制的软件设计。
　　为了使得整个系统的传输部分可以实现与各种传输设备的连接，因此，在软件设计时，必须能灵活地支持各种通信接口标准，为此，在软件设计时，采用分层设计的原则，将底层的功能封装起来，成了一个个可以灵活调用的模块。其结构如下。
　　将二级控制系统的软件系统分为3层：最低层是通信控制层，实现对不同传输介质、不同通信接口标准的通信控制。底层实现时采用DLL(动态连接库)技术，为第二层提供各种服务。
　　第二层为通信装拆包层，在发送方，负责接收高层传递下来的各种通信信息，并将根据低层通信的传输要求，将其打包再送往底层；在接收方，该层负责拆开由底层传送上来的包(Packet)，并将包打开，处理后将有效信息传送给高层进行处理。
　　第三层即高层，实现二级控制广播系统的各种功能，负责处理各种信息的控制功能。由于采用分层设计，还定义了层与层之间的接口关系，明确了各层所应完成的任务。
　　从图3中可以看出，为了便于用户选择不同的底层通信硬件，一旦第一层(物理层)发生变化，在整个软件系统中，仅需修改底层的通信驱动部分，而不影响其他层的功能实现。由于采用模块化设计，只要在底层为某个底层通信硬件增加相应的驱动程序，即可实现对不同的物理层的通信驱动，这样就增加了系统的适应能力，可以适用于不同的硬件系统环境。
　　为了实现广播系统中的一些特有的功能，在系统维护方面采用了数据库技术。本系统中共建立了17个表，分别对广播系统内的各种信息进行维护。
　　采用数据库技术的优点是：可以方便地实现对整个系统的维护，用户只要修改数据库中的内容即可以实现对系统中各种信息的设置和维护功能。
　　通信协议是基于面向字符的基本型通信协议，并在此基础上，定义了本系统所需要的帧类型和帧格式，并赋予其确定的含义，实践表明：这种协议是高效的、可靠的。
2.3 监测台的软件设计
　　监测台在设计时，主要是根据车站发送来的信息，进行处理并提示维护人员。为了使得维护人员能够及时发现某个车站的故障，系统中设置了语音提示和图形提示的告警方式。而一旦故障消除后，立即取告警，恢复正常工作。
　　设计时同样采用数据库技术，对每个车站建立设备表，根据接收到的车站信息设置设备表中的状态位。而一旦某个车站设备表中的状态位发生变化，立即告警。
　　监测台的主要功能有：车站运行状态告警、检查故障车站的设备名称和故障类型、故障信息的打印、车站设备的增加和删除等。
3 结论
　　城市轨道交通是近年来在我国兴起的一种新型的旅客运输服务业务，目前由于国内的技术限制，大多采用引进设备。而引进设备的价格高、维护困难，同时由于车站广播系统的研制和开发我国已进入成熟的时期，这主要表现在铁路车站的广播系统的开发与研制上，目前国内已开始研制具有自动广播能力的车站广播系统。而适合于城市轨道交通的广播系统却没有进行研究和开发。城市轨道交通的广播系统的研究对加快我国的城市轨道交通建设具有积极的意义，可以节约投资成本，维护方便。
作者简介：薜小平 男，35岁，讲师，从事计算机网络通信的研究和开发
作者单位：上海铁道大学计算机通信研究室 上海200331
参考文献
1 汪松滋，黄钟.地铁概论.南京：南京出版社，1994-05
2 ISDX Integrated Serviced Digital Terminal Supplement.GECPLESSEY Telecommunications Ltd.，1993
3 Shanghai Metro Broadcast System.HIEMENS，1992
4 Kruglingski D.VC++技术内幕.北京：清华大学出版社，1995
收稿日期：1998-12-24 修回日期：1999-01-21
